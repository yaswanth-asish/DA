#include <stdio.h>
#include <limits.h>

int max(int a, int b) { return (a>b) ? a : b; }
int max3(int a, int b, int c) { return max(max(a,b), c); }

int maxCross(int a[], int l, int m, int h) {
    int sum = 0, left = INT_MIN;
    for(int i = m; i >= l; i--) {
        sum += a[i];
        if(sum > left) left = sum;
    }
    sum = 0;
    int right = INT_MIN;
    for(int i = m+1; i <= h; i++) {
        sum += a[i];
        if(sum > right) right = sum;
    }
    return left + right;
}

int maxSub(int a[], int l, int h) {
    if(l == h) return a[l];

    int m = (l + h) / 2;

    return max3(
        maxSub(a, l, m),
        maxSub(a, m+1, h),
        maxCross(a, l, m, h)
    );
}

int main() {
    int n;
    scanf("%d", &n);
    int a[n];

    for(int i=0;i<n;i++) scanf("%d",&a[i]);

    printf("Max Subarray = %d\n", maxSub(a, 0, n-1));
}
